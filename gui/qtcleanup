#! /bin/bash
#
# qtcleanup -- remove all files generated by Qt
#
# (c) 2024 Prof Dr Andreas Müller
#
{
find . -name moc_\*.h -print
find . -name moc_\*.cpp -print
find . -name ui_\*.h -print
find . -name ui_\*.cpp -print 
} | while read f
do
	echo working on file ${f}
	if grep -q 'will be lost' ${f} 
	then
		echo generated file, removing ${f}
		rm ${f}
	else
		echo precious file, skippting
	fi
done

echo removing objects 
find . -name \*.o -exec rm {} \; -print
echo removing libraries
find . -name lib\*.a -exec rm {} \; -print

echo removing stash
find . -name .qmake.stash -exec rm {} \; -print
